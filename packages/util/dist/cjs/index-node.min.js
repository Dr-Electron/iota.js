!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("big-integer")):"function"==typeof define&&define.amd?define(["exports","big-integer"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).IotaUtil={},t.bigInt)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=r(e);class n{static byteLength(t){const e=n.getLengths(t);return n.calcByteLength(e[0],e[1])}static decode(t){let e;const r=n.getLengths(t),s=r[0],i=r[1],a=new Uint8Array(n.calcByteLength(s,i));let h=0;const o=i>0?s-4:s;let d;for(d=0;d<o;d+=4)e=n._REVERSE_LOOKUP[t.charCodeAt(d)]<<18|n._REVERSE_LOOKUP[t.charCodeAt(d+1)]<<12|n._REVERSE_LOOKUP[t.charCodeAt(d+2)]<<6|n._REVERSE_LOOKUP[t.charCodeAt(d+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;return 2===i&&(e=n._REVERSE_LOOKUP[t.charCodeAt(d)]<<2|n._REVERSE_LOOKUP[t.charCodeAt(d+1)]>>4,a[h++]=255&e),1===i&&(e=n._REVERSE_LOOKUP[t.charCodeAt(d)]<<10|n._REVERSE_LOOKUP[t.charCodeAt(d+1)]<<4|n._REVERSE_LOOKUP[t.charCodeAt(d+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e),a}static encode(t){let e;const r=t.length,s=r%3,i=[],a=16383;for(let e=0,h=r-s;e<h;e+=a)i.push(n.encodeChunk(t,e,e+a>h?h:e+a));return 1===s?(e=t[r-1],i.push(`${n._LOOKUP[e>>2]+n._LOOKUP[e<<4&63]}==`)):2===s&&(e=(t[r-2]<<8)+t[r-1],i.push(`${n._LOOKUP[e>>10]+n._LOOKUP[e>>4&63]+n._LOOKUP[e<<2&63]}=`)),i.join("")}static calcByteLength(t,e){return 3*(t+e)/4-e}static getLengths(t){const e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=t.indexOf("=");-1===r&&(r=e);return[r,r===e?0:4-r%4]}static tripletToBase64(t){return n._LOOKUP[t>>18&63]+n._LOOKUP[t>>12&63]+n._LOOKUP[t>>6&63]+n._LOOKUP[63&t]}static encodeChunk(t,e,r){let s;const i=[];for(let a=e;a<r;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(n.tripletToBase64(s));return i.join("")}}n._LOOKUP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n._REVERSE_LOOKUP={43:62,45:62,47:63,48:52,49:53,50:54,51:55,52:56,53:57,54:58,55:59,56:60,57:61,65:0,66:1,67:2,68:3,69:4,70:5,71:6,72:7,73:8,74:9,75:10,76:11,77:12,78:13,79:14,80:15,81:16,82:17,83:18,84:19,85:20,86:21,87:22,88:23,89:24,90:25,95:63,97:26,98:27,99:28,100:29,101:30,102:31,103:32,104:33,105:34,106:35,107:36,108:37,109:38,110:39,111:40,112:41,113:42,114:43,115:44,116:45,117:46,118:47,119:48,120:49,121:50,122:51};class i{static bytesToUtf8(t,e,r){const s=null!=e?e:0,n=null!=r?r:t.length;let i="";for(let e=s;e<s+n;e++){const r=t[e];if(r<128)i+=String.fromCharCode(r);else if(r>191&&r<224)i+=String.fromCharCode((31&r)<<6|63&t[e+1]),e+=1;else if(r>223&&r<240)i+=String.fromCharCode((15&r)<<12|(63&t[e+1])<<6|63&t[e+2]),e+=2;else{const s=((7&r)<<18|(63&t[e+1])<<12|(63&t[e+2])<<6|63&t[e+3])-65536;i+=String.fromCharCode(s>>10|55296,1023&s|56320),e+=3}}return i}static utf8ToBytes(t){const e=[];for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e.push(s):s<2048?e.push(192|s>>6,128|63&s):s<55296||s>=57344?e.push(224|s>>12,128|s>>6&63,128|63&s):(r++,s=65536+((1023&s)<<10|1023&t.charCodeAt(r)),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return Uint8Array.from(e)}static bytesToHex(t,e,r,s){let n="";if(this.buildHexLookups(),i.ENCODE_LOOKUP){const a=null!=r?r:t.length,h=null!=e?e:0;if(s)for(let e=0;e<a;e++)n=i.ENCODE_LOOKUP[t[h+e]]+n;else for(let e=0;e<a;e++)n+=i.ENCODE_LOOKUP[t[h+e]]}return n}static hexToBytes(t,e){const r=t.length>>1,s=r<<1,n=new Uint8Array(r);if(this.buildHexLookups(),i.DECODE_LOOKUP){let r=0,a=0;for(;r<s;)n[a++]=i.DECODE_LOOKUP[t.charCodeAt(r++)]<<4|i.DECODE_LOOKUP[t.charCodeAt(r++)];e&&n.reverse()}return n}static utf8ToHex(t){return i.bytesToHex(i.utf8ToBytes(t))}static hexToUtf8(t){return i.bytesToUtf8(i.hexToBytes(t))}static isHex(t){return t.length%2!=1&&/^[\da-f]+$/g.test(t)}static bytesToBinary(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].toString(2).padStart(8,"0"));return e.join("")}static binaryToBytes(t){const e=new Uint8Array(Math.ceil(t.length/8));for(let r=0;r<e.length;r++)e[r]=Number.parseInt(t.slice(8*r,8*(r+1)),2);return e}static bytesToBase64(t){return n.encode(t)}static base64ToBytes(t){return n.decode(t)}static buildHexLookups(){if(!i.ENCODE_LOOKUP||!i.DECODE_LOOKUP){const t="0123456789abcdef";i.ENCODE_LOOKUP=[],i.DECODE_LOOKUP=[];for(let e=0;e<256;e++)i.ENCODE_LOOKUP[e]=t[e>>4&15]+t[15&e],e<16&&(e<10?i.DECODE_LOOKUP[48+e]=e:i.DECODE_LOOKUP[87+e]=e)}}}class a{}a.isNodeJs=!0;class h{static generate(t){return require("crypto").randomBytes(t)}}class o{static read3(t,e){const r=t[e+0]+(t[e+1]<<8)+(t[e+2]<<16)>>>0;return s.default(r)}static read4(t,e){const r=t[e+0]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0;return s.default(r)}static read8(t,e){const r=t.slice(e,e+8),n=i.bytesToHex(r,void 0,void 0,!0);return s.default(n,16)}static read32(t,e){const r=t.slice(e,e+32),n=i.bytesToHex(r,void 0,void 0,!0);return s.default(n,16)}static write8(t,e,r){let s=t.toString(16);s=s.padStart(16,"0");const n=i.hexToBytes(s,!0);e.set(n,r)}static write32(t,e,r){let s=t.toString(16);s=s.padStart(64,"0");const n=i.hexToBytes(s,!0);e.set(n,r)}static random(t=8){return s.default(i.bytesToHex(h.generate(t)),16)}}class d{constructor(){this._storage=new Uint8Array(d.CHUNK_SIZE),this._writeIndex=0}length(){return this._storage.length}unused(){return this._storage.length-this._writeIndex}finalBytes(){return this._storage.subarray(0,this._writeIndex)}finalHex(){return i.bytesToHex(this._storage.subarray(0,this._writeIndex))}getWriteIndex(){return this._writeIndex}setWriteIndex(t){if(this._writeIndex=t,t>=this._storage.length)throw new Error(`You cannot set the writeIndex to ${t} as the stream is only ${this._storage.length} in length`)}writeFixedHex(t,e,r){if(!i.isHex(r))throw new Error(`The ${t} should be in hex format`);if(2*e!==r.length)throw new Error(`${t} length ${r.length} does not match expected length ${2*e}`);this.expand(e),this._storage.set(i.hexToBytes(r),this._writeIndex),this._writeIndex+=e}writeBytes(t,e,r){this.expand(e),this._storage.set(r,this._writeIndex),this._writeIndex+=e}writeByte(t,e){this.expand(1),this._storage[this._writeIndex++]=255&e}writeUInt16(t,e){this.expand(2),this._storage[this._writeIndex++]=255&e,this._storage[this._writeIndex++]=e>>>8}writeUInt32(t,e){this.expand(4),this._storage[this._writeIndex++]=255&e,this._storage[this._writeIndex++]=e>>>8,this._storage[this._writeIndex++]=e>>>16,this._storage[this._writeIndex++]=e>>>24}writeUInt64(t,e){this.expand(8),o.write8(e,this._storage,this._writeIndex),this._writeIndex+=8}writeUInt256(t,e){this.expand(32),o.write32(e,this._storage,this._writeIndex),this._writeIndex+=32}writeBoolean(t,e){this.expand(1),this._storage[this._writeIndex++]=e?1:0}expand(t){if(this._writeIndex+t>this._storage.byteLength){const e=new Uint8Array(this._storage.length+Math.ceil(t/d.CHUNK_SIZE)*d.CHUNK_SIZE);e.set(this._storage,0),this._storage=e}}}d.CHUNK_SIZE=4096,t.Base64=n,t.BigIntHelper=o,t.Converter=i,t.PlatformHelper=a,t.RandomHelper=h,t.ReadStream=class{constructor(t,e=0){this._storage=new Uint8Array(t),this._readIndex=e}length(){return this._storage.byteLength}hasRemaining(t){return this._readIndex+t<=this._storage.byteLength}unused(){return this._storage.byteLength-this._readIndex}getReadIndex(){return this._readIndex}setReadIndex(t){if(this._readIndex=t,t>=this._storage.length)throw new Error(`You cannot set the readIndex to ${t} as the stream is only ${this._storage.length} in length`)}readFixedHex(t,e,r=!0){if(!this.hasRemaining(e))throw new Error(`${t} length ${e} exceeds the remaining data ${this.unused()}`);const s=i.bytesToHex(this._storage,this._readIndex,e);return r&&(this._readIndex+=e),s}readBytes(t,e,r=!0){if(!this.hasRemaining(e))throw new Error(`${t} length ${e} exceeds the remaining data ${this.unused()}`);const s=this._storage.slice(this._readIndex,this._readIndex+e);return r&&(this._readIndex+=e),s}readByte(t,e=!0){if(!this.hasRemaining(1))throw new Error(`${t} length 1 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex];return e&&(this._readIndex+=1),r}readUInt16(t,e=!0){if(!this.hasRemaining(2))throw new Error(`${t} length 2 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex]|this._storage[this._readIndex+1]<<8;return e&&(this._readIndex+=2),r}readUInt32(t,e=!0){if(!this.hasRemaining(4))throw new Error(`${t} length 4 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex]|256*this._storage[this._readIndex+1]|65536*this._storage[this._readIndex+2]+16777216*this._storage[this._readIndex+3];return e&&(this._readIndex+=4),r}readUInt64(t,e=!0){if(!this.hasRemaining(8))throw new Error(`${t} length 8 exceeds the remaining data ${this.unused()}`);const r=o.read8(this._storage,this._readIndex);return e&&(this._readIndex+=8),r}readUInt256(t,e=!0){if(!this.hasRemaining(32))throw new Error(`${t} length 32 exceeds the remaining data ${this.unused()}`);const r=o.read32(this._storage,this._readIndex);return e&&(this._readIndex+=32),r}readBoolean(t,e=!0){if(!this.hasRemaining(1))throw new Error(`${t} length 1 exceeds the remaining data ${this.unused()}`);const r=this._storage[this._readIndex];return e&&(this._readIndex+=1),0!==r}},t.WriteStream=d,Object.defineProperty(t,"__esModule",{value:!0})}));